<html>
  <!--
    Baseball Team Generator
    --DONE--
      pull ai-created palette from colormind.io
      edit svg with colors from palette
  -->
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
      var palette;
      function generate() {
        var url = "http://colormind.io/api/";
        var data = {
          model : "default",
        }

        var http = new XMLHttpRequest();
        
        http.onreadystatechange = function() {
          if(http.readyState == 4 && http.status == 200) {
            palette = JSON.parse(http.responseText).result;
            document.getElementById("result").innerHTML=palette;
            var c=document.getElementById("canvas");
            var ctx=c.getContext("2d");
            
            
            $capSVG = $("#cap");
            $(".capPrimary", $capSVG).attr('style', 'fill:rgb('+palette[0]+')');
            $(".capBrim", $capSVG).attr('style', 'fill:rgb('+palette[4]+')');
            
            var img = new Image();
            img.onload=function(){
              for (var i = 0, len = data.length, p; i < len; i++) {
                p = data[i];
                ctx.drawImage(this, p[0] , p[1] , 150, 150);
              }
            }
            img.src = $capSVG;
            
            ctx.fillStyle = 'rgb('+palette[0]+')';
            ctx.fillRect(0,0,25,25);
            ctx.fillStyle = 'rgb('+palette[1]+')';
            ctx.fillRect(25,0,25,25);
            ctx.fillStyle = 'rgb('+palette[2]+')';
            ctx.fillRect(50,0,25,25);
            ctx.fillStyle = 'rgb('+palette[3]+')';
            ctx.fillRect(75,0,25,25);
            ctx.fillStyle = 'rgb('+palette[4]+')';
            ctx.fillRect(100,0,25,25);
          }
        }

        http.open("POST", url, true);
        http.send(JSON.stringify(data));
      }
    </script>
    <style>
      #capDiv{
        height:640px;
        width:480px;
      }
    </style>
  </head>
  <body onload="generate()">
    <button type="submit" onclick="generate()">OK</button>
    <div id="capDiv">
      <?xml version="1.0" encoding="utf-8"?>
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 216.7 153.9" style="enable-background:new 0 0 216.7 153.9;" xml:space="preserve">
        <style type="text/css">
          .capPrimary{fill:none;stroke:#000000;}
          .capBrim{fill:none;stroke:#000000;}
        </style>
        <g id="cap">
          <title>Cap</title>
          <g id="Layer_2">
            <g id="Reference">
              <path class="capBrim" d="M0.6,125.8c0.2-1.4,0.8-2.8,1.6-4c2-2.9,5.1-4.9,8-6.8c10.2-6.6,20-13.8,29.2-21.7c3.8-3.3,7.8-6.8,12.7-7.7
                c3.2-0.6,6.5-0.1,9.7,0.5c26.9,5.2,51.6,18.4,78.1,25.3c6,1.6,12.3,2.9,17.7,6c-11.8,11.4-25.1,21.1-39.6,28.7
                c-6.8,3.6-14.1,6.8-21.8,7.1c-6.4,0.3-12.7-1.4-18.7-3.5c-7.4-2.7-14.5-6.2-21.2-10.4c-4.9-3.1-9.6-6.6-14.5-9.7
                c-4.8-3.1-9.9-5.7-15-8.4c-2.3-1.2-4.7-2.4-7.2-2.7c-2.4-0.2-4.9,0.5-7.1,1.5c-3.9,1.8-7.5,4.7-9.3,8.6c-0.3,0.6-0.6,2.5-1.4,2.3
                c-0.7-0.1-1.1-2.3-1.1-2.8C0.5,127.5,0.5,126.6,0.6,125.8z"/>
              <path class="capBrim" d="M152.5,0.8c1.8,0.3,3.6,0.8,5,1.8c1.3,0.8,2.9,2.9,0.4,3.3c-2,0.3-4.9-0.6-7-0.9c-1.1-0.1-3.6-0.1-4.3-1.3
                c-1.4-2.1,1.9-3.3,3.5-3.2C150.9,0.5,151.7,0.6,152.5,0.8z"/>
              <path class="capPrimary" d="M147.4,5.3c3.3,0.2,6.5,0.6,9.7,1.3c11.9,2.5,22.7,8.7,32.3,16.1c9.3,7.2,16.4,16,20.9,26.9
                c5.7,13.8,6.8,29.1,5.3,43.9c-0.4,3.9-0.9,7.8-1.6,11.7c-0.8,5.4-1.8,10.7-3.5,15.9c-0.5,1.7-1.4,5.8-3.1,6.2
                c-1,0.2-3.2-0.7-4.2-1c-1.5-0.3-3-0.7-4.5-1c-11.8-2.6-23.7-5.1-35.7-6.9c-7.5-1.1-15-4.3-22.4-6.4c-4-1.2-8-2.3-11.9-3.6
                c-19.8-6.3-38.8-15-58.8-20.2c-3.8-1-7.7-1.9-11.7-2.2c-2-0.1-8.8,1.2-9.4-0.4c-0.6-1.5,1-4.7,1.6-6c0.7-1.8,1.6-3.5,2.2-5.3
                c3.9-10.6,8-21.1,13.2-31.2c4.8-9.3,11.3-17.1,20-23.1c6.5-4.5,13.7-8.2,21.1-10.9c7.6-2.9,15.9-3.3,24-3.6
                C136.4,5.1,141.9,4.9,147.4,5.3z"/>
              <path class="capPrimary" d="M34.5,126.1C34.6,126.1,34.5,126.1,34.5,126.1c-1.1,2.2-3.6,3.6-5.4,5c-2.4,1.8-4.9,3.5-7.4,5.1
                c-1.2,0.8-2.4,1.6-3.8,2c-2,0.6-4.2,0.5-6.2,0.3c-2.6-0.2-5.6-0.6-7.3-2.6C0.2,131.2,4.8,125,9,122c6.1-4.3,11.6-4.4,17.8-0.4
                C29.3,123.2,32.3,124.5,34.5,126.1z"/>
          </g>
        </g>
      </svg>
    </div>
    <p id="result">result</p>
    <canvas width=640 height=480 id="canvas"></canvas>
  </body>
</html>